# 🌐 VPN, Batsion이란

- 외부에서 접근 방법에 대해 VPN, Bastion을 통해 들어갈 수 있고 우선 이 2개가 어떤 것인지 찾아보고 공부를 하였다.

## 1. 🎯 VPN(Virtuial Private Network)

**VPN이란?**

- VPN은 공용 인터넷망을 통해 사설 네트워크처럼 안전하게 통신할 수 있게 해주는 기술이다. 공개망을 통과하는 트래픽을 암호화된 터널로 감싸서 내부 사설망에 직접 접속한 것처럼 보이게 하는 기술이다.

즉, 사용자는 집 / 카페 등 외부로 접속 -> VPN 연결 시 회사 내부 IP 대역을 부여받고 네트워크 쪽에서는 사내에서 접속하는 클라이언트처럼 보일 수 있다.

**VPN 핵심기능**

1. 암호화된 터널링

   - 모든 데이터가 암호화되어 전송된다.
   - 중간에 누가 가로채더라도 내용을 알 수 없다.

2. IP 주소 변경

   - 회사 네트워크에 연결하여 회사 IP를 부여받는다.
   - 외부에서 회사 내부에 있는 것처럼 보인다.

3. 네트워크 레벨 접근 제어
   - 인증된 사용자만 회사 네트워크에 접속할 수 있다.
   - ID/PW, 인증서, OTP 등으로 사용자 인증을 수행한다.
   - 접속 후 일반 사무실에서 일하는 것처럼 모든 내부 리소스에 접근이 가능하다.

VPN 사용 예시

```
[재택근무 직원]
    ↓ (VPN 연결)
[공용 인터넷]
    ↓ (암호화된 터널)
[회사 VPN 게이트웨이]
    ↓
[회사 내부 네트워크] → 사내 시스템, DB, 파일 서버 등
```

- 위 예시를 보면, VPN 게이트웨이는 보통 퍼블릭에 접근 가능한 엔드포인트를 가진다.
- 내부 측 인터페이스는 사내 VPC/내부망으로 연결된다.
- 사용자가 VPN에 접속, 내부망으로 라우팅이 열리는 구조다.

## ⚡ 2. Bastion 서버

**Bastion이란?**

- Bastion 서버(점프서버, Jump Box)라고도 부르고, 외부에서 내부 서버로 접근하기 위해 진입점 역할을 하는 서버다. 예를들어, 아파트 단지에 들어와서 동으로 가기 위해 거쳐야하는 경비실과 비슷하다.
- 외부/관리자가 내부 서버에 접근할 때 경유하도록 하는 중간 관리용 서버다.

**Bastion 기능**

1. 단일 진입점, 트래픽 집중

   - 모든 SSH/RDP 접속이 이 서버를 통해서 가능하도록 한다.
   - 내부 서버들은 직접적인 외부 접근을 허용하지 않는다.
   - 내부 서버에 접속할 때 베스천에 먼저 접속 하게 하고, 베스천 -> 내부서버 순서로 접속하게 한다.

2. 강화된 보안설정

   - 최소한의 서비스만 실행된다.
   - 철저하게 접근 로그를 기록한다.
   - 정기적인 보안 패치가 적용된다.
   - 명력 기록, 세션 녹화 등의 감사도 수행이 가능하다.

3. 접근제어 감사
   - 누가, 언제, 어떤 서버에 접속했는 지 모두 기록된다.
   - 다단계 인증(MFA)를 적용할 수 있다.
   - 베스천 서버의 IP에서 오는 트래픽만 허용하게 설정한다.
   - 관리용 포트를 바깥에 열지않고 베스천에서만 접근 가능한 Private 환경을 만든다.

## 3. 네트워크 위치

- 일반적인 구조

```
[VPN Gateway] ─── [Bastion Host] ─── [내부 서버들(DB, WAS, 캐시 등)]

```

## 4. VPN, 베스천을 통한 접근

1. VPN 접속

2. 베스천 서버 접속

3. 베스천 -> 내부서버 점프

```
[내 PC]
   │ (인터넷)
   ▼
[VPN Gateway]  ← 외부에서 접근 가능, 여기까지가 "네트워크 경계"
   │ (VPN 터널 내부: 사내망으로 편입)
   ▼
[Bastion Host] ← 내부망에 있는 관리용 서버 (점프 호스트)
   │
   ├── [DB Server]
   ├── [Application Server]
   └── [기타 내부 자원]

```

---
