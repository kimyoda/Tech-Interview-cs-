# 🌐 NestJS 기초개념

## 1.NestJS란?

### 1-1. NestJS란?

- TypeScript로 구축된 Node.js 서버사이드 프레임워크이다.
- **데코레이터**와 **의존성 주입**을 활용하여, 확장 가능하고 유지 보수하기 쉬운 서버사이드 애플리케이션을 구축할 수 있다.
- **Express**나 **Fastify**를 기반으로 하여, 모듈러 아키텍처와 TypeScript의 타입 안전성을 제공한다.

---

### 1-2. NestJS와 Express의 차이점은?

- **Express**는 웹 프레임워크로 자유도가 높으나 구조가 없어 큰 프로젝트에서는 복잡할 수 있다.
- NestJS는 정해진 아키텍처 패턴(모듈, 컨트롤러, 서비스)를 제공하고 TypeScript 기반으로 타입 안전성과 의존성 주입을 지원해 규모가 큰 애플리케이션 개발에 적합하다.

---

## 2. 구성 요소

### 2-1. NestJS 구성요소

- **Module**: 앱의 구조를 조직화하는 단위이고 관련된 컨트롤러와 서비스들을 그룹핑한다.
- **Controller**: HTTP 요청을 처리하고 응답을 반환하는 역할을 한다.
- **Service(Provider)**: 비즈니스 로직을 담당하고 다른 컴포넌트에 주입 가능한 클래스이다.
- **Middleware**: 요청/응답 사이클에 실행되는 함수들이다.

---

### 2-2 프로바이더(Provider)란?

- 프로바이더는 의존성 주입이 가능한 클래스이다. `@Injectable()`데코레이터가 붙은 서비스, 레포지토리, 팩토리, 헬퍼 등이 될 수 있다. NestJSIoC 컨테이너에 의해 관리하고, 생성자를 통해 다른 클래스에 주입된다.

---

## 3. 데코레이터

### 3-1. 주요 데코레이터와 역할을 설명해라.

- `@Module()`: 모듈을 정의하고 imports, controllers, providers 등을 설정한다.
- `@Controller()` : HTTP 엔드포인트를 처리하는 클래스를 정의한다.
- `@Injectable()`:의존성 주입 가능한 프로바이더로 마킹한다.
- `@Get()`, `@Post()`, `@Put()`, `@Delete()`: HTTP 메서드를 매핑한다.

### 3-2. `@Injectable()` 데코레이터의 역할?

- `@Injectable()` 데코레이터는 클래스가 의존성 주입 시스템에 참여할 수 있도록 메타데이터를 추가한다.
- 데코레이터가 있어야 NestJS IoC 컨테이너가 해당 클래스의 인스턴스를 생성하고 다른 클래스에 주입할 수 있다.

---

## 4. 모듈 시스템

### 4-1. 모듈이란?

- 모듈은 `@Module()` 데코레이터로 장식된 클래스, 애플리케이션 구조를 조직화한다. imports(다른 모듈 가져오기), controllers(컨트롤러 등록), providers(프로바이더 등록), exports(다른 모듈에 사용할 수 있도록 내보내기)속성을 가진다.

### 4-2. 전역모듈과 기능 모듈의 차이

- **기능 모듈**: 특정 기능에 관련된 컨트롤러와 서비스들을 그룹화
- **전역 모듈**: `@Global()` 데코레이터가 붙은 모듈, 한번 import 하면 애플리케이션 전체에서 사용이 가능하다.
- **공유 모듈**: exports 배열을 통해 다른 모듈에서 재사용할 수 있는 모듈

## 6. 요청 처리 흐름

### 6-1. HTTP 요청이 NestJS 처리

1. 미들웨어: 요청 전처리(로깅, CORS 등)
2. 가드(Guards): 인증 / 인가 검사
3. 인터셉터(Before)L 요처 데이터 변형
4. 파이프(Pipes): 데이터 검증 및 변환
5. 컨트롤러 핸들러: 실제 비즈니스 로직을 실행
6. 인터셉터(After): 응답 데이터 변형함
7. 필터(Exception Filters): 예외처리
8. 응답 반환

---

## 7. 파이프(Pipes)

### 파이프란?

- 파이프는 데이터 검증과 변환을 담당하는 컴포넌트다.
- 컨트롤러 핸들러가 실행되기 전 입력 데이터를 처리한다.
- 내장 파이프로 `ValidationPipe`, `ParseIntPipe` 등이 있다.
- DTO와 class-validator를 함께 사용해 자동 검증이 가능하다.

---

## 8. DTO(Data Transfer Object)란?

- **DTO**는 계층 간 데이터 전송을 위한 객체이다.
- TypeScript 타입 안정성을 제공, class-validator 데코레이터와 함께 사용해 입력 데이터 검증을 자동화할 수 있다.
- API 문서화와 런타임 검증을 동시에 제공한다.

## 9. 기본 설정 및 환경변수

### 9.1 NestJS에서 환경변수를 어떻게 처리하나

- `@nestjs/config` 패키지를 사용해 환경변수를 관리한다.
- ConfigModule을 루트 모듈에 import하고, ConfigService를 주입받아 환경변수에 접근할 수 있다.
- .envㅠㅏ일과 validate 함수를 통해 환경변수 검증도 가능하다.
